<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Home · VTTrac.jl</title><script data-outdated-warner src="assets/warner.js"></script><link rel="canonical" href="https://tsukada-cs.github.io/VTTrac.jl/"/><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.045/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.13.24/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="assets/documenter.js"></script><script src="siteinfo.js"></script><script src="../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><div class="docs-package-name"><span class="docs-autofit"><a href>VTTrac.jl</a></span></div><form class="docs-search" action="search/"><input class="docs-search-query" id="documenter-search-query" name="q" type="text" placeholder="Search docs"/></form><ul class="docs-menu"><li class="is-active"><a class="tocitem" href>Home</a></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><nav class="breadcrumb"><ul class="is-hidden-mobile"><li class="is-active"><a href>Home</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Home</a></li></ul></nav><div class="docs-right"><a class="docs-edit-link" href="https://github.com/tsukada-cs/VTTrac.jl/blob/main/docs/src/index.md#" title="Edit on GitHub"><span class="docs-icon fab"></span><span class="docs-label is-hidden-touch">Edit on GitHub</span></a><a class="docs-settings-button fas fa-cog" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-sidebar-button fa fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a></div></header><article class="content" id="documenter-page"><h1 id="VTTrac"><a class="docs-heading-anchor" href="#VTTrac">VTTrac</a><a id="VTTrac-1"></a><a class="docs-heading-anchor-permalink" href="#VTTrac" title="Permalink"></a></h1><p>Documentation for <a href="https://github.com/tsukada-cs/VTTrac.jl">VTTrac</a>.</p><ul><li><a href="#VTTrac.chk_zmiss_region-Tuple{VTT, Int64, Int64, Int64, Int64, Int64}"><code>VTTrac.chk_zmiss_region</code></a></li><li><a href="#VTTrac.chk_zsub_peak_inside-Tuple{VTT, AbstractMatrix{Float32}}"><code>VTTrac.chk_zsub_peak_inside</code></a></li><li><a href="#VTTrac.do_tracking-Tuple{VTT, Any, Any, Any, Any, Any, Bool, Bool}"><code>VTTrac.do_tracking</code></a></li><li><a href="#VTTrac.find_score_peak-Tuple{VTT, Matrix{Float32}, Int64, Int64}"><code>VTTrac.find_score_peak</code></a></li><li><a href="#VTTrac.find_subgrid_peak_5pt_epara-NTuple{5, Real}"><code>VTTrac.find_subgrid_peak_5pt_epara</code></a></li><li><a href="#VTTrac.find_subgrid_peak_5pt_gaus-NTuple{5, Real}"><code>VTTrac.find_subgrid_peak_5pt_gaus</code></a></li><li><a href="#VTTrac.get_score-Tuple{VTT, AbstractMatrix{Float32}, Int64, Int64, Int64, Int64, Int64}"><code>VTTrac.get_score</code></a></li><li><a href="#VTTrac.get_score_ncov-Tuple{VTT, AbstractMatrix{Float32}, Int64, Int64, Int64, Int64, Int64}"><code>VTTrac.get_score_ncov</code></a></li><li><a href="#VTTrac.get_score_ncov_with_visible-Tuple{VTT, AbstractMatrix{Float32}, AbstractMatrix{Bool}, Int64, Int64, Int64, Int64, Int64}"><code>VTTrac.get_score_ncov_with_visible</code></a></li><li><a href="#VTTrac.get_score_with_visible-Tuple{VTT, AbstractMatrix{Float32}, AbstractMatrix{Bool}, Int64, Int64, Int64, Int64, Int64}"><code>VTTrac.get_score_with_visible</code></a></li><li><a href="#VTTrac.get_score_xcor-Tuple{VTT, AbstractMatrix{Float32}, Int64, Int64, Int64, Int64, Int64}"><code>VTTrac.get_score_xcor</code></a></li><li><a href="#VTTrac.get_score_xcor_with_visible-Tuple{VTT, AbstractMatrix{Float32}, AbstractMatrix{Bool}, Int64, Int64, Int64, Int64, Int64}"><code>VTTrac.get_score_xcor_with_visible</code></a></li><li><a href="#VTTrac.get_zsub-Tuple{VTT, Int64, Int64, Int64}"><code>VTTrac.get_zsub</code></a></li><li><a href="#VTTrac.get_zsub_subgrid-Tuple{VTT, Int64, Float64, Float64}"><code>VTTrac.get_zsub_subgrid</code></a></li><li><a href="#VTTrac.get_zsub_view-Tuple{VTT, Int64, Int64, Int64}"><code>VTTrac.get_zsub_view</code></a></li><li><a href="#VTTrac.get_zsub_visible-Tuple{VTT, Int64, Int64, Int64}"><code>VTTrac.get_zsub_visible</code></a></li><li><a href="#VTTrac.get_zsub_visible_subgrid-Tuple{VTT, Int64, Float64, Float64}"><code>VTTrac.get_zsub_visible_subgrid</code></a></li><li><a href="#VTTrac.get_zsub_visible_view-Tuple{VTT, Int64, Int64, Int64}"><code>VTTrac.get_zsub_visible_view</code></a></li><li><a href="#VTTrac.inspect_t_index-Tuple{VTT, Int64}"><code>VTTrac.inspect_t_index</code></a></li><li><a href="#VTTrac.print_ary2d-Tuple{Any}"><code>VTTrac.print_ary2d</code></a></li><li><a href="#VTTrac.roundInt-Tuple{Real}"><code>VTTrac.roundInt</code></a></li><li><a href="#VTTrac.set_basic!-Tuple{VTT, Int64, Int64, Int64, Int64}"><code>VTTrac.set_basic!</code></a></li><li><a href="#VTTrac.set_ixyhw_directly-Tuple{VTT, Int64, Int64}"><code>VTTrac.set_ixyhw_directly</code></a></li><li><a href="#VTTrac.set_ixyhw_from_v-Tuple{VTT, Float64, Float64}"><code>VTTrac.set_ixyhw_from_v</code></a></li><li><a href="#VTTrac.set_optional!-Tuple{VTT, Bool, Bool, String, AbstractFloat, AbstractFloat, Real, Real, Float64, Float64, Bool, Int64}"><code>VTTrac.set_optional!</code></a></li><li><a href="#VTTrac.setup-Tuple{VTT, Int64, Int64}"><code>VTTrac.setup</code></a></li><li><a href="#VTTrac.sliding_ncov-Tuple{VTT, Real, Matrix{Float32}, Int64, Int64, Int64, Int64, Int64}"><code>VTTrac.sliding_ncov</code></a></li><li><a href="#VTTrac.sliding_xcor-Tuple{VTT, Real, Matrix{Float32}, Int64, Int64, Int64, Int64, Int64}"><code>VTTrac.sliding_xcor</code></a></li><li><a href="#VTTrac.trac-Tuple{VTT, Any, Any, Any}"><code>VTTrac.trac</code></a></li></ul><article class="docstring"><header><a class="docstring-binding" id="VTTrac.chk_zmiss_region-Tuple{VTT, Int64, Int64, Int64, Int64, Int64}" href="#VTTrac.chk_zmiss_region-Tuple{VTT, Int64, Int64, Int64, Int64, Int64}"><code>VTTrac.chk_zmiss_region</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">chk_zmiss_region(o, tid, k0, k1, l0, l1)</code></pre><p>Check if there is data missing in the specified region at <code>tid</code>.</p><p><strong>Returns</strong></p><ul><li><code>stat::Bool</code>: <code>false</code> if there is no data missing, <code>true</code> if not.</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/tsukada-cs/VTTrac.jl/blob/4987b48a645d49ca3fa5f0ad25f4e6e373315ea2/src/VTTrac.jl#L606-L613">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="VTTrac.chk_zsub_peak_inside-Tuple{VTT, AbstractMatrix{Float32}}" href="#VTTrac.chk_zsub_peak_inside-Tuple{VTT, AbstractMatrix{Float32}}"><code>VTTrac.chk_zsub_peak_inside</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">chk_zsub_peak_inside(o, zs)</code></pre><p>Check whether the template subimage is peaked (maximized or minimized) inside, and the peak is conspicuous enough, having a difference from the  max or min on the sides greater than peak<em>inside</em>th*(inside<em>max - inside</em>min).</p><p><strong>Caution</strong></p><p>If <code>o.peak_inside_th</code> &lt; 0, no checking is conducted.</p><p><strong>Returns</strong></p><ul><li><code>stat::Bool</code>: <code>false</code> if passed the check, <code>true</code> if not.</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/tsukada-cs/VTTrac.jl/blob/4987b48a645d49ca3fa5f0ad25f4e6e373315ea2/src/VTTrac.jl#L578-L590">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="VTTrac.do_tracking-Tuple{VTT, Any, Any, Any, Any, Any, Bool, Bool}" href="#VTTrac.do_tracking-Tuple{VTT, Any, Any, Any, Any, Any, Bool, Bool}"><code>VTTrac.do_tracking</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">do_tracking(o, tid0, x0, y0, vx0, vy0, out_subimage, out_score_ary)</code></pre><p>Conduct tracking (core).</p><p><strong>Arguments</strong></p><ul><li><code>o::VTT</code>: The traking oject.</li><li><code>tid0::Vector{Integer}</code>: Tracking initial time indices.</li><li><code>x0::Vector{Float64}</code>: Tracking initial template-center x location (index-based; non-integer for subgrid).</li><li><code>y0::Vector{Float64}</code>: Tracking initial template-center y location (index-based; non-integer for subgrid).</li><li><code>vx0g::Vector{Float64}</code>: First guess of vx (to search around it). Can be 0.</li><li><code>vy0g::Vector{Float64}</code>: First guess of vy (to search around it). Can be 0.</li><li><code>out_subimage::Bool</code>: Whether output subimages.</li><li><code>out_score_ary::Bool</code>: Whether output score arrays.</li></ul><p><strong>Returns</strong></p><ul><li><code>count::Matrix{Float64}</code>: (len: len) The number of successful tracking for each initial template.</li><li><code>tid::Matrix{Float64}</code>: (len: (ntrac+1)*len) Time index of the trajectories (tid0 and subsequent ones).</li><li><code>x::Matrix{Float64}</code>: (len: (ntrac+1)*len) x locations of the trajectories (x0 and derived ones).</li><li><code>y::Matrix{Float64}</code>: (len: (ntrac+1)*len) y locations of trajectories (x0 and derived ones).</li><li><code>vx::Matrix{Float64}</code>: (len: ntrac*len) Derived x-velocity.</li><li><code>vy::Matrix{Float64}</code>: (len: ntrac*len) Derived y-velocity.</li><li><code>score::Matrix{Float64}</code>: (len: ntrac*len)  Scores along the trajectory (max values, possibly at subgrid).</li><li><code>zss::Array{Float32,4}</code>: (optional, if non-<code>nothing</code>) (Diagnosis output if wanted) The subimages along the track (1D pointer for 4D array; nsx * nsy * (ntrac+1) * len.</li><li><code>score_ary::Array{Float32,4}</code>: (optional, if non-<code>nothing</code>) (Diagnosis output if wanted) the entire scores (1D pointer for 4D array; (x-sliding size) * (y-sliding size) * (ntrac+1) * len.</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/tsukada-cs/VTTrac.jl/blob/4987b48a645d49ca3fa5f0ad25f4e6e373315ea2/src/VTTrac.jl#L1138-L1163">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="VTTrac.find_score_peak-Tuple{VTT, Matrix{Float32}, Int64, Int64}" href="#VTTrac.find_score_peak-Tuple{VTT, Matrix{Float32}, Int64, Int64}"><code>VTTrac.find_score_peak</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">find_score_peak(o, scr, kw, lw)</code></pre><p>Find the score peak and its location.</p><p><strong>Returns</strong></p><ul><li><code>stat::Bool</code>: <code>false</code> if the peak is inside; <code>true</code> if not.</li><li><code>kpi::Float64</code>: the peak location x.</li><li><code>lpi::Float64</code>: the peak location y.</li><li><code>scrp::Float64</code>: the peak score.</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/tsukada-cs/VTTrac.jl/blob/4987b48a645d49ca3fa5f0ad25f4e6e373315ea2/src/VTTrac.jl#L995-L1005">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="VTTrac.find_subgrid_peak_5pt_epara-NTuple{5, Real}" href="#VTTrac.find_subgrid_peak_5pt_epara-NTuple{5, Real}"><code>VTTrac.find_subgrid_peak_5pt_epara</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">find_subgrid_peak_5pt_epara(c, l, r, b, t)</code></pre><p>Find subgrid peak from 5 points with elliptic paraboloid.</p><p>Input c(enter), l(eft), r(ight), b(ottom), t(op) at (0,0), (-1,0), (0,1), (0,-1), (0,1), respectively. c must be greater than any of l,r,b,t.</p><p>Equation: z = -p(x-x0)^2 + -q(y-y0)^2 + r             = -p x^2 + 2p x0 x - q y^2 + 2q y0 y + c</p><p>, where u = p x0, v = q y0, c = -p x0^2 - q y0^2 + r</p><p><strong>Returns</strong></p><ul><li><code>stat::Bool</code>: <code>false</code> if find peak successfully, <code>true</code> if not.</li><li><code>x0::float</code>: x of peak the location.</li><li><code>y0::float</code>: y of peak the location.</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/tsukada-cs/VTTrac.jl/blob/4987b48a645d49ca3fa5f0ad25f4e6e373315ea2/src/VTTrac.jl#L907-L926">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="VTTrac.find_subgrid_peak_5pt_gaus-NTuple{5, Real}" href="#VTTrac.find_subgrid_peak_5pt_gaus-NTuple{5, Real}"><code>VTTrac.find_subgrid_peak_5pt_gaus</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">find_subgrid_peak_5pt_gaus(c, l, r, b, t)</code></pre><p>Find subgrid peak from 5 points by interpolating with a 2D gaussian (for positive scores).</p><p>It is simply a log-version of the elliptic-paraboloid method (<code>find_subgrid_peak_5pt_epara</code>). It appears that this method is preferred in many PIVs over the elliptic-paraboloid method (<code>find_subgrid_peak_5pt_epara</code>). In a test, there were not much difference between them, though.</p><p>Input c(enter), l(eft), r(ight), b(ottom), t(op) at (0,0), (-1,0), (0,1), (0,-1), (0,1), respectively. all of them must be positive. c must be greater than any of l,r,b,t.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/tsukada-cs/VTTrac.jl/blob/4987b48a645d49ca3fa5f0ad25f4e6e373315ea2/src/VTTrac.jl#L944-L959">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="VTTrac.get_score-Tuple{VTT, AbstractMatrix{Float32}, Int64, Int64, Int64, Int64, Int64}" href="#VTTrac.get_score-Tuple{VTT, AbstractMatrix{Float32}, Int64, Int64, Int64, Int64, Int64}"><code>VTTrac.get_score</code></a> — <span class="docstring-category">Method</span></header><section><div><p>Conduct template matching driver</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/tsukada-cs/VTTrac.jl/blob/4987b48a645d49ca3fa5f0ad25f4e6e373315ea2/src/VTTrac.jl#L883">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="VTTrac.get_score_ncov-Tuple{VTT, AbstractMatrix{Float32}, Int64, Int64, Int64, Int64, Int64}" href="#VTTrac.get_score_ncov-Tuple{VTT, AbstractMatrix{Float32}, Int64, Int64, Int64, Int64, Int64}"><code>VTTrac.get_score_ncov</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">get_score_ncov(o, x, tid, k0, k1, l0, l1)</code></pre><p>Conduct template matching, scoring by normalized covariance.</p><p><strong>Returns</strong></p><ul><li><code>stat::Bool</code>: <code>false</code> if passed the check, <code>true</code> if not.</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/tsukada-cs/VTTrac.jl/blob/4987b48a645d49ca3fa5f0ad25f4e6e373315ea2/src/VTTrac.jl#L762-L769">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="VTTrac.get_score_ncov_with_visible-Tuple{VTT, AbstractMatrix{Float32}, AbstractMatrix{Bool}, Int64, Int64, Int64, Int64, Int64}" href="#VTTrac.get_score_ncov_with_visible-Tuple{VTT, AbstractMatrix{Float32}, AbstractMatrix{Bool}, Int64, Int64, Int64, Int64, Int64}"><code>VTTrac.get_score_ncov_with_visible</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">get_score_ncov_with_visible(o, x, tid, k0, k1, l0, l1)</code></pre><p>Conduct template matching, scoring by normalized covariance.</p><p><strong>Returns</strong></p><ul><li><code>stat::Bool</code>: <code>false</code> if passed the check, <code>true</code> if not.</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/tsukada-cs/VTTrac.jl/blob/4987b48a645d49ca3fa5f0ad25f4e6e373315ea2/src/VTTrac.jl#L830-L837">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="VTTrac.get_score_with_visible-Tuple{VTT, AbstractMatrix{Float32}, AbstractMatrix{Bool}, Int64, Int64, Int64, Int64, Int64}" href="#VTTrac.get_score_with_visible-Tuple{VTT, AbstractMatrix{Float32}, AbstractMatrix{Bool}, Int64, Int64, Int64, Int64, Int64}"><code>VTTrac.get_score_with_visible</code></a> — <span class="docstring-category">Method</span></header><section><div><p>Conduct template matching driver with visible</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/tsukada-cs/VTTrac.jl/blob/4987b48a645d49ca3fa5f0ad25f4e6e373315ea2/src/VTTrac.jl#L895">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="VTTrac.get_score_xcor-Tuple{VTT, AbstractMatrix{Float32}, Int64, Int64, Int64, Int64, Int64}" href="#VTTrac.get_score_xcor-Tuple{VTT, AbstractMatrix{Float32}, Int64, Int64, Int64, Int64, Int64}"><code>VTTrac.get_score_xcor</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">get_score_xcor(o, x, tid, k0, k1, l0, l1)</code></pre><p>Conduct template matching, scoring by cross-correlation.</p><p><strong>Returns</strong></p><ul><li><code>stat::Bool</code>: <code>false</code> if passed the check, <code>true</code> if not.</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/tsukada-cs/VTTrac.jl/blob/4987b48a645d49ca3fa5f0ad25f4e6e373315ea2/src/VTTrac.jl#L746-L753">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="VTTrac.get_score_xcor_with_visible-Tuple{VTT, AbstractMatrix{Float32}, AbstractMatrix{Bool}, Int64, Int64, Int64, Int64, Int64}" href="#VTTrac.get_score_xcor_with_visible-Tuple{VTT, AbstractMatrix{Float32}, AbstractMatrix{Bool}, Int64, Int64, Int64, Int64, Int64}"><code>VTTrac.get_score_xcor_with_visible</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">get_score_xcor_with_visible(o, x, tid, k0, k1, l0, l1)</code></pre><p>Conduct template matching, scoring by cross-correlation.</p><p><strong>Returns</strong></p><ul><li><code>stat::Bool</code>: <code>false</code> if passed the check, <code>true</code> if not.</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/tsukada-cs/VTTrac.jl/blob/4987b48a645d49ca3fa5f0ad25f4e6e373315ea2/src/VTTrac.jl#L778-L785">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="VTTrac.get_zsub-Tuple{VTT, Int64, Int64, Int64}" href="#VTTrac.get_zsub-Tuple{VTT, Int64, Int64, Int64}"><code>VTTrac.get_zsub</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">get_zsub(o, tid, xi, yi)</code></pre><p>Read out a template subimage from the image at <code>tid</code>.</p><p>The sub-image positons are specified at its center. (If the sub-image size is even, with one more pix on the &quot;left&quot; / &quot;bottom&quot;, by starting from the index <code>xi-nsx/2</code>, <code>yi-nsy/2</code>).</p><p><strong>Returns</strong></p><ul><li><code>stats::Bool</code>: <code>false</code> if successful (specified region is valid and, if <code>chk_zmiss</code>, </li></ul><p>no data missing), <code>true</code> if not.</p><ul><li><code>zsub::Matrix{Float32}</code>: Subimage at (x,y) = (xi, yi). </li></ul><p><strong>See Also</strong></p><ul><li><a href="#VTTrac.get_zsub_view-Tuple{VTT, Int64, Int64, Int64}"><code>get_zsub_view</code></a></li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/tsukada-cs/VTTrac.jl/blob/4987b48a645d49ca3fa5f0ad25f4e6e373315ea2/src/VTTrac.jl#L331-L347">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="VTTrac.get_zsub_subgrid-Tuple{VTT, Int64, Float64, Float64}" href="#VTTrac.get_zsub_subgrid-Tuple{VTT, Int64, Float64, Float64}"><code>VTTrac.get_zsub_subgrid</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">get_zsub_subgrid(o, tid, x, y)</code></pre><p>Read out a template submimage from the image at <code>tid</code>. Possibly at subgrid: Linearly interpolated, if x or y has deviation from integer (bilinear if x and y). Efficient: no unnecessary read-out is made.</p><p><strong>Returns</strong></p><ul><li><code>stats::Bool</code>: <code>false</code> if successful (specified region is valid and, if <code>chk_zmiss</code>, </li></ul><p>no data missing), <code>true</code> if not.</p><ul><li><code>zsubg::Matrix{Float32}</code>: Subimage.</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/tsukada-cs/VTTrac.jl/blob/4987b48a645d49ca3fa5f0ad25f4e6e373315ea2/src/VTTrac.jl#L461-L473">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="VTTrac.get_zsub_view-Tuple{VTT, Int64, Int64, Int64}" href="#VTTrac.get_zsub_view-Tuple{VTT, Int64, Int64, Int64}"><code>VTTrac.get_zsub_view</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">get_zsub_view(o, tid, xi, yi)</code></pre><p>Like <code>get_zsub</code>, but returns a view.</p><p><strong>Notes</strong></p><ul><li>This function returns a view of subimage. <code>get_zsub</code> returns a copy of subimage.</li></ul><p><strong>See Also</strong></p><ul><li><a href="#VTTrac.get_zsub-Tuple{VTT, Int64, Int64, Int64}"><code>get_zsub</code></a></li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/tsukada-cs/VTTrac.jl/blob/4987b48a645d49ca3fa5f0ad25f4e6e373315ea2/src/VTTrac.jl#L366-L376">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="VTTrac.get_zsub_visible-Tuple{VTT, Int64, Int64, Int64}" href="#VTTrac.get_zsub_visible-Tuple{VTT, Int64, Int64, Int64}"><code>VTTrac.get_zsub_visible</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">get_zsub_visible(o, tid, xi, yi)</code></pre><p>Read out a template subimage and subvisible from the image and visible at <code>tid</code>.</p><p>The sub-image positons are specified at its center. (If the sub-image size is even, with one more pix on the &quot;left&quot; / &quot;bottom&quot;, by starting from the index <code>xi-nsx/2</code>, <code>yi-nsy/2</code>).</p><p><strong>Returns</strong></p><ul><li><code>stats::Bool</code>: <code>false</code> if successful (specified region is valid and, if <code>chk_zmiss</code>, </li></ul><p>no data missing), <code>true</code> if not.</p><ul><li><code>zsub::Matrix{Float32}</code>: Subimage at (x,y) = (xi, yi). </li></ul><p><strong>See Also</strong></p><ul><li><a href="#VTTrac.get_zsub_visible_view-Tuple{VTT, Int64, Int64, Int64}"><code>get_zsub_visible_view</code></a></li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/tsukada-cs/VTTrac.jl/blob/4987b48a645d49ca3fa5f0ad25f4e6e373315ea2/src/VTTrac.jl#L392-L408">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="VTTrac.get_zsub_visible_subgrid-Tuple{VTT, Int64, Float64, Float64}" href="#VTTrac.get_zsub_visible_subgrid-Tuple{VTT, Int64, Float64, Float64}"><code>VTTrac.get_zsub_visible_subgrid</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">get_zsub_visible_subgrid(o, tid, x, y)</code></pre><p>Read out a template submimage from the image at <code>tid</code>. Possibly at subgrid: Linearly interpolated, if x or y has deviation from integer (bilinear if x and y). Efficient: no unnecessary read-out is made.</p><p><strong>Returns</strong></p><ul><li><code>stats::Bool</code>: <code>false</code> if successful (specified region is valid and, if <code>chk_zmiss</code>, </li></ul><p>no data missing), <code>true</code> if not.</p><ul><li><code>zsubg::Matrix{Float32}</code>: Subimage.</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/tsukada-cs/VTTrac.jl/blob/4987b48a645d49ca3fa5f0ad25f4e6e373315ea2/src/VTTrac.jl#L514-L526">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="VTTrac.get_zsub_visible_view-Tuple{VTT, Int64, Int64, Int64}" href="#VTTrac.get_zsub_visible_view-Tuple{VTT, Int64, Int64, Int64}"><code>VTTrac.get_zsub_visible_view</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">get_zsub_visible_view(o, tid, xi, yi)</code></pre><p>Like <code>get_zsub_visible</code>, but returns a view.</p><p><strong>Notes</strong></p><ul><li>This function returns a view of zsub and visible. <code>get_zsub_visible</code> returns a copy of zsub and visible.</li></ul><p><strong>See Also</strong></p><ul><li><a href="#VTTrac.get_zsub_visible-Tuple{VTT, Int64, Int64, Int64}"><code>get_zsub_visible</code></a></li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/tsukada-cs/VTTrac.jl/blob/4987b48a645d49ca3fa5f0ad25f4e6e373315ea2/src/VTTrac.jl#L426-L436">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="VTTrac.inspect_t_index-Tuple{VTT, Int64}" href="#VTTrac.inspect_t_index-Tuple{VTT, Int64}"><code>VTTrac.inspect_t_index</code></a> — <span class="docstring-category">Method</span></header><section><div><p>To check whether a time index is valid. Returns <code>false</code> if valid, <code>true</code> if not.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/tsukada-cs/VTTrac.jl/blob/4987b48a645d49ca3fa5f0ad25f4e6e373315ea2/src/VTTrac.jl#L325">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="VTTrac.print_ary2d-Tuple{Any}" href="#VTTrac.print_ary2d-Tuple{Any}"><code>VTTrac.print_ary2d</code></a> — <span class="docstring-category">Method</span></header><section><div><p>print a 2D double array</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/tsukada-cs/VTTrac.jl/blob/4987b48a645d49ca3fa5f0ad25f4e6e373315ea2/src/VTTrac.jl#L983">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="VTTrac.roundInt-Tuple{Real}" href="#VTTrac.roundInt-Tuple{Real}"><code>VTTrac.roundInt</code></a> — <span class="docstring-category">Method</span></header><section><div><p>round to Int like C/C++</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/tsukada-cs/VTTrac.jl/blob/4987b48a645d49ca3fa5f0ad25f4e6e373315ea2/src/VTTrac.jl#L456">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="VTTrac.set_basic!-Tuple{VTT, Int64, Int64, Int64, Int64}" href="#VTTrac.set_basic!-Tuple{VTT, Int64, Int64, Int64, Int64}"><code>VTTrac.set_basic!</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">set_basic!(o, nsx, nsy, itstep, ntrac)</code></pre><p>Sets basic (mandatory) tracking parameters. Also sets default vals for optional params.</p><p><strong>Arguments</strong></p><ul><li><code>o::VTT</code>: The object.</li><li><code>nsx::Integer</code>: The template subimage size (x).</li><li><code>nsy::Integer</code>: The template subimage size (y).</li><li><code>itstep::Integer</code>: Index-based time step for tracking (can be negative).</li><li><code>ntrac::Integer</code>: Number of times for each initial template is tracked.</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/tsukada-cs/VTTrac.jl/blob/4987b48a645d49ca3fa5f0ad25f4e6e373315ea2/src/VTTrac.jl#L245-L256">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="VTTrac.set_ixyhw_directly-Tuple{VTT, Int64, Int64}" href="#VTTrac.set_ixyhw_directly-Tuple{VTT, Int64, Int64}"><code>VTTrac.set_ixyhw_directly</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">set_ixyhw_from_v(o, ixch, iyxh)</code></pre><p>Sets the tracking parameters <code>i[xy]hw</code>.</p><p><strong>Arguments</strong></p><ul><li><code>o::VTT</code>: The object.</li><li><code>ixhw::Float64</code>: The range over which next x is searched around initial guess.</li><li><code>iyhw</code>::Float64: The range over which next y is searched around initial guess.</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/tsukada-cs/VTTrac.jl/blob/4987b48a645d49ca3fa5f0ad25f4e6e373315ea2/src/VTTrac.jl#L228-L237">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="VTTrac.set_ixyhw_from_v-Tuple{VTT, Float64, Float64}" href="#VTTrac.set_ixyhw_from_v-Tuple{VTT, Float64, Float64}"><code>VTTrac.set_ixyhw_from_v</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">set_ixyhw_from_v(o, vxch, vyxh)</code></pre><p>Sets the tracking parameters <code>i[xy]hw</code> from velocities (v[xy]hh).</p><p><strong>Arguments</strong></p><ul><li><code>o::VTT</code>: The object.</li><li><code>vxhw::Float64</code>: The range over which vx is searched around initial guess.</li><li><code>vyhw</code>::Float64: The range over which vy is searched around initial guess.</li></ul><p>```</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/tsukada-cs/VTTrac.jl/blob/4987b48a645d49ca3fa5f0ad25f4e6e373315ea2/src/VTTrac.jl#L209-L220">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="VTTrac.set_optional!-Tuple{VTT, Bool, Bool, String, AbstractFloat, AbstractFloat, Real, Real, Float64, Float64, Bool, Int64}" href="#VTTrac.set_optional!-Tuple{VTT, Bool, Bool, String, AbstractFloat, AbstractFloat, Real, Real, Float64, Float64, Bool, Int64}"><code>VTTrac.set_optional!</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">set_optional!(o, subgrid, subgrid_gaus, score_method, score_th0, score_th1, peak_inside_th, min_contrast, vxch, vych, use_init_temp)</code></pre><p>Sets optional tracking parameters.</p><p><strong>Arguments</strong></p><ul><li><code>o::VTT</code>: The object.</li><li><code>subgrid::Bool</code>: Whether to conduct subgrid tracking.</li><li><code>subgrid_gaus::Bool</code>: Whether subgrid peak finding is by gaussian.</li><li><code>score_method::String</code>: Scoring method (such as xcor for cross-correlation).</li><li><code>score_th0::AbstractFloat</code>: (Result screening parameter) Minimum score required for the first-time tracking.</li><li><code>score_th1::AbstractFloat</code>: (Result screening parameter) Minimum score required for the subsequent tracking.</li><li><code>peak_inside_th::Real</code>: An initial template is used only when   it is peaked (max or min) inside, exceeding the max or min along the sides by the ratio specified by its value.</li><li><code>min_contrast::Real</code>: An initial template is used only when    it has a difference in max and min greater than its value.</li><li><code>vxch::Float64</code>: (Result screening parameter) If positive, tracking result is rejected if the vx    chnages along trajecty greather than this value (thus used only when ntrac&gt;=2). As a special case,    if the result of the second tracking is rejected, the first one is also rejected, since there is    no consecutive consistent result in this case.</li><li><code>vych::Float64</code>: (Result screening parameter) As vxch but for the y-component.</li><li><code>min_visible::Int</code>: Minimum number of visible values to calculate score when <code>chk_mask</code> is true.</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/tsukada-cs/VTTrac.jl/blob/4987b48a645d49ca3fa5f0ad25f4e6e373315ea2/src/VTTrac.jl#L276-L298">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="VTTrac.setup-Tuple{VTT, Int64, Int64}" href="#VTTrac.setup-Tuple{VTT, Int64, Int64}"><code>VTTrac.setup</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">setup(o, nsx, nsy, vxhw, vyhw, [ixhw, iyhw, subgrid, subgrid_gaus,
    itstep, ntrac, score_method, score_th0, score_th1, vxch, vych,
    peak_inside, peak_inside_th, min_contrast, use_init_temp, min_visible])</code></pre><p>Setup for tracking.</p><p><strong>Arguments</strong></p><ul><li><code>o::VTT</code>: The object.</li><li><code>nsx::Integer, nsy::Integer</code>: Submimage x &amp; y sizes (x:1st, y:2nd dim).</li><li><code>vxch::Union{Real, Nothing}, vyhw::Union{Real, Nothing}</code>: (either <code>v[xy]hw</code> or <code>i[xy]hw</code> are MANDATORY).   the dimensions along which to perform the computation.   search velocity range half sizes to set <code>i[xy]hw</code>.   Seach at least to cover +-v?hw around the first guess or previous step.   (the result can be outside the range.)</li><li><code>ixhw::Union{Int, Nothing}, iyhw::Union{Int, Nothing}</code>: (either <code>v[xy]hw</code> or <code>i[xy]hw</code> are MANDATORY)   Max displacement fro template match (can be set indirecly through <code>v[xy]hw</code>).</li><li><code>subgrid::Bool=true</code>: Whether to conduct subgrid tracking.</li><li><code>subgrid_gaus::Bool=true</code>: Whether subgrid peak finding is by gaussian.</li><li><code>itstep::Integer=1</code>: Step of <code>t</code>&#39;s used (skip if &gt;1).</li><li><code>ntrack::Integer=2</code>: Max tracking times from initial loc.</li><li><code>score_method::String=&quot;xcor&quot;</code>: <code>&quot;xcor&quot;</code> for cross-correlation, <code>&quot;ncov&quot;</code> for normalized covariance.</li><li><code>score_th0::AbstractFloat=0.8</code>: The minimum score required for the 1st tracking.</li><li><code>score_th1::AbstractFloat=0.7</code>: The minimum score required for subsequent tracking.</li><li><code>vxch::Union{Real, Nothing}=nothing</code>: If non-<code>nothing</code>, the max tolerant vx   change between two consecutive tracking.</li><li><code>vych::Union{Real, Nothing}=nothing</code>: If non-<code>nothing</code>, the max tolerant vy   change between two consecutive tracking.</li><li><code>peak_inside_th::Union{Real, Nothing}=nothing</code>: If non-<code>nothing</code>, an initial template is used only when   it is peaked (max or min) inside, exceeding the max or min along the sides by the ratio specified by its value.</li><li><code>min_contrast::Union{Real, Nothing}=nothing</code>: If non-<code>nothing</code>, an initial template is used only when    it has a difference in max and min greater than its value.</li><li><code>min_visible::Int=1</code>: Minimum number of visible values to calculate score when <code>chk_mask</code> is true.</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/tsukada-cs/VTTrac.jl/blob/4987b48a645d49ca3fa5f0ad25f4e6e373315ea2/src/VTTrac.jl#L96-L129">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="VTTrac.sliding_ncov-Tuple{VTT, Real, Matrix{Float32}, Int64, Int64, Int64, Int64, Int64}" href="#VTTrac.sliding_ncov-Tuple{VTT, Real, Matrix{Float32}, Int64, Int64, Int64, Int64, Int64}"><code>VTTrac.sliding_ncov</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">sliding_ncov(o, sigx, xd, tid, k0, k1, l0, l1)</code></pre><p>Sliding normalized covariance between the sugimage and image at <code>tid</code>.</p><p>Normalization is done by the sigma of the fist image : cov(x&#39;,y&#39;)/sigx^2 (in contrast to cov(x&#39;,y&#39;)/sigx/sigy in the correlation coefficient).</p><p><strong>Returns</strong></p><ul><li><code>stat::Bool</code>: <code>false</code> if all the relevant data and regions are valid, so all the scores   (ncov) are defined at all tested center locations; <code>true</code> if not.</li><li><code>scr::Matrix{Float32}</code>: Score array.</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/tsukada-cs/VTTrac.jl/blob/4987b48a645d49ca3fa5f0ad25f4e6e373315ea2/src/VTTrac.jl#L687-L699">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="VTTrac.sliding_xcor-Tuple{VTT, Real, Matrix{Float32}, Int64, Int64, Int64, Int64, Int64}" href="#VTTrac.sliding_xcor-Tuple{VTT, Real, Matrix{Float32}, Int64, Int64, Int64, Int64, Int64}"><code>VTTrac.sliding_xcor</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">sliding_xcor(o, sigx, xd, tid, k0, k1, l0, l1)</code></pre><p>Sliding cross-correlation between the sugimage and image at <code>tid</code>.</p><p><strong>Returns</strong></p><ul><li><code>stat::Bool</code>: <code>false</code> if all the relevant data and regions are valid, so all the scores   (xcor) are defined at all tested center locations; <code>true</code> if not.</li><li><code>scr::Matrix{Float32}</code>: Score array.</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/tsukada-cs/VTTrac.jl/blob/4987b48a645d49ca3fa5f0ad25f4e6e373315ea2/src/VTTrac.jl#L618-L628">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="VTTrac.trac-Tuple{VTT, Any, Any, Any}" href="#VTTrac.trac-Tuple{VTT, Any, Any, Any}"><code>VTTrac.trac</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">trac(o, tid, x, y[, vxg, vyg, out_subimage, out_score_ary])</code></pre><p>Conduct tracking.</p><p><strong>Arguments</strong></p><ul><li><code>o::VTT</code>: The traking oject.</li><li><code>tid::Array{Integer,Any}</code>: Tracking initial time indices.</li><li><code>x::Array{Float64,Any}</code>: Tracking initial template-center x location (index-based; non-integer for subgrid).</li><li><code>y::Array{Float64,Any}</code>: Tracking initial template-center y location (index-based; non-integer for subgrid).</li><li><code>vxg::Array{Float64,Any}=nothing</code>: First guess of vx (to search around it). Can be 0.</li><li><code>vyg::Array{Float64,Any}=nothing</code>: First guess of vy (to search around it). Can be 0.</li><li><code>out_subimage::Bool=false</code>: Whether output subimages.</li><li><code>out_score_ary::Bool=false</code>: Whether output score arrays.</li><li><code>to_missing::Bool=true</code>: Whether output missing values as <code>missing</code>.</li></ul><p><strong>Returns</strong></p><ul><li><code>count::Vector{Integer}</code>: [len] The number of successful tracking for each initial template.</li><li><code>tid::Matrix{Float64}</code>: [ntrac+1, len] time index of the trajectories (tid0 and subsequent ones).</li><li><code>x::Matrix{Float64}</code>: [ntrac+1, len] x locations of the trajectories (x0 and derived ones).</li><li><code>y::Matrix{Float64}</code>: [ntrac+1, len] y locations of trajectories (x0 and derived ones).</li><li><code>vx::Matrix{Float64}</code>: [ntrac, len] Derived x-velocity.</li><li><code>vy::Matrix{Float64}</code>: [ntrac, len] Derived y-velocity.</li><li><code>score::Matrix{Float64}</code>: [ntrac, len] Scores along the trajectory (max values, possibly at subgrid).</li><li><code>zss::Array{Float32,4}</code>: <a href="optional, if non-`nothing`">nsx, nsy, ntrac+1, len</a>   (Diagnosis output if wanted) The subimages along the track.</li><li><code>score_arry::Array{Float64,4}</code>: <a href="optional, if non-`nothing`">(x-sliding size, y-sliding size, ntrac+1, len</a>   (Diagnosis output if wanted) The entire scores.</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/tsukada-cs/VTTrac.jl/blob/4987b48a645d49ca3fa5f0ad25f4e6e373315ea2/src/VTTrac.jl#L1042-L1070">source</a></section></article></article><nav class="docs-footer"><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 0.27.24 on <span class="colophon-date" title="Saturday 25 February 2023 19:08">Saturday 25 February 2023</span>. Using Julia version 1.8.5.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
